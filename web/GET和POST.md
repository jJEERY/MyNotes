# GET和POST

> 参考文章《[GET和POST两种基本请求方法的区别](https://www.cnblogs.com/logsharing/p/8448446.html)》、《[面试必备：GET和POST的区别详细解说](https://baijiahao.baidu.com/s?id=1626599028653203490&wfr=spider&for=pc)》

### GET和POST表面上的区别
直接参考W3school的内容进行比较

| |GET|POST|
|:---:|:---:|:---:|
|后退按钮/刷新|无害 |数据会被重新提交|
|书签|可收藏为书签|不可收藏为书签|
|缓存|能被缓存|不能缓存|
|编码类型|application/x-www-form-urlencoded|application/x-www-form-urlencoded或multipart/form-data。为二进制数据使用多重编码|
|历史|参数保留在浏览器历史中|参数不会保存在浏览器历史中|
|对数据长度的限制|是的。当发送数据时，GET方法向URL添加数据，URL的长度是受限制的(URL最长2048个字符)|无限制|
|对数据类型的限制|只允许ASCII字符|没有限制。也允许二进制数据|
|安全性|与POST相比，GET的安全性较差，因为所发送的数据是URL的一部分。|POST比GET更安全，因为参数不会被保存在浏览器历史或web服务器日志中|
|可见性|数据在URL中对所有人都是可见的|数据不会显示在URL中|

### GET和POST本质上的区别
由于GET和POST都是HTTP协议中的两种发送请求的方法，而HTTP是基于TCP/IP的协议，所以说GET和POST的底层实现也是TCP/IP，**因此从本质上来
说，两者直接并没有什么区别**。我们可以在GET请求的body中添加数据，也可以给POST请求中的URL中添加数据，技术层面上来说都是行得通的。  

#### 那么，w3school中关于GET和POST的区别是哪里来的呢？  

在万维网中，TCP就像是运输数据的汽车:car:，它非常可靠，从未发生过少件的事情。但是如果路上跑的都是一模一样的汽车，那这个世界就会看
起来一团乱，要是送急件的汽车被满载货物的汽车堵在路上，那么系统可能会发生瘫痪。为避免这种情况的发生，就有了HTTP这个交通规则的诞生。
HTTP给汽车设置了好几种服务类别，包括GET/POST/DELETE等等一共8种。HTTP规定传输数据时必须给汽车贴上相对应的标签，如GET请求时，需要贴上
GET的标签(method为GET)，而且要求把数据放在车顶上(URL)方便记录，而POST请求时，同样需要贴上POST的标签(method为POST),并且把数据放在车
厢(request body中)里方便记录。由于汽车类型是一样的，因此我们也可以给GET标签的汽车的车厢中塞点数据，也可以给POST标签的汽车的车顶上放一些数据，
虽然不禁止，但是不推荐，原因后面会进行说明。总而言之，HTTP只是一个传输数据的规范，TCP才是实现GET和POST的技术基础。  

#### 到这里我们只是看到了HTTP对于GET和POST的传送渠道做了限制，那么参数大小的限制又是怎么来的呢？  

理论上来说，汽车:car:(TCP)的运载量是没有限制的，我们可以给汽车装载无限量的数据，但是为什么实际生产中却有限制呢，这就需要提到万维网中的
另一个重要角色--运输公司。不同的浏览器(发送HTTP请求)以及服务器(接受HTTP请求)就是不同的运输公司。由于装货和卸货都需要一定的成本，并且这个
成本是与数据量成正比的，因此即便我们能够给汽车装载无限量的数据，运输公司也不会同意这么做的，数据量太大对于浏览器和服务器来说都是很大的负担，
也有可能会有安全问题(恶意构造长URL进行攻击)，因此他们会通过限制单次运输量来控制风险。当我们给GET标签的汽车在车厢(request body)中装载数据
时，不同服务器的处理方式也是不同的，有些会帮你卸货，也就是说该次数据的传输是成功的；但是也有一些服务器是不会帮你卸货的，直接忽略，这样就会
造成数据的丢失，因此虽然说GET是可以在request body里面装载数据，但是并不能保证一定会被接收到，因此不推荐尝试。   

#### POST比GET更加安全？  

总结一下网络上关于这个问题的回答，需要从不同的角度上看。从传输方式的表面上看，POST将数据存储在request body中而URL是直接暴露在URL中，因此
可以直观地认为POST的安全性是要高一点的；从数据遗留上看，GET是可以缓存的，并且数据会保留在浏览器的历史记录中，操作过后用户是可以直接通过查询
获取相关数据的，而POST是不可缓存，并且不会保留记录，在这点上POST的安全性是会比较高的。  
但是从传输的角度上来说，GET和POST都是不安全的，原因在HTTP在网络中传输采用的是明文的方式，只要在网络节点上抓包，就能完整地获得数据报文。btw，想要
安全传输，就只有加密，也就是HTTPS。

#### 关于文章中POST会产生两个数据包的问题

第一篇文章中提到POST会将header和body分开发送，先发header并且等待服务器返回100状态码之后再发送body。首先并不否定这种情况的发生，部分服务器和框架可能
为了安全考虑会将header和body进行分发处理，但是也只是服务器和框架的原因，并非POST请求的必然行为，HTTP协议中也没有明确说明POST请求会产生两个TCP数据
包。

