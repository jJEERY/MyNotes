# 数据灾备

> 数据灾备全称为数据灾难备份，是指为防止出现操作失误或系统故障导致数据丢失，而将全系统或部分数据集合，从应用主机的硬盘或阵列复制到其他存储介质的过程。

### 数据库丢失
+ 逻辑错误：包括软件bug、病毒攻击、数据块被破坏等
+ 物理损坏：包括服务器、磁盘损坏等
+ 自然灾害：火灾、地震等自然灾害对数据中心的摧毁等

### 主流商用数据库的数据库灾备机制：
+ Oracle -- DataGuard
+ DB2    -- HADR
+ Sybase ASE -- Replication Server
+ MS SQLServer --数据库镜像

### 阿里云的DTS（[数据库灾备](https://blog.csdn.net/weixin_44487968/article/details/88419310)）
Data Transmission Service，是阿里云提供的一种支持多种数据源之间数据交互的数据流服务。
它提供了数据迁移、实时数据订阅及数据实时同步等多种数据传输能力。在数据库灾备解决方案中，
使用阿里云DTS可实现各数据库间的数据迁移与实时同步，从而为数据库灾备打好最重要的基础。

### 存储如何跨机房使用（[同城异地灾备](https://blog.csdn.net/TM6zNf87MDG7Bo/article/details/82504648)）
+ DNS解析  
在业务大量使用DNS解耦的时候，而且需要使用双机房的时候，那么就必然需要DNS具有一定的智能化，从而就有anycat类型的DNS，所谓的anycast类型的
DNS，，也就是能返回客户端最短路径的IP地址，从而让客户用更少的时间得到需要访问的IP地址。
+ 数据库同步   
在数据库方面，主要是使用mysql，而mysql则主要是使用主备模式，从而主的在一个机房，而备库则在另外一个机房，在同步的时候，不可避免的情况就是
如果一旦主机宕机，从而有可能是丢失数据的，因为mysql在数据同步的时候，是使用异步的方式进行，但是这种由于有操作日志的存在，从而数据也不会丢
失，但是，有可能存在冲突的可能，从而需要有人为的介入进行修复。  
使用oracle进行灾备时，双机房情况下，可以使用一个机房数据库只读另一个只写的方式，进行数据备份，由于自动备份信息，因此可以保证数据的同步性
以及准确性
+ SLB高可用  
在每个机房中，流量的入口总是SLB，从而保证SLB高可用也是相当关键的，所有的VM的rs服务器都是挂接在SLB之后，一旦SLB不可用，那么所有的业务中断。
